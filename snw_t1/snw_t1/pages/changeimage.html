<script>
    /*!
    * Bootstrap v3.3.5 (http://getbootstrap.com)
    * Copyright 2011-2015 Twitter, Inc.
    * Licensed under the MIT license
    */
    if ("undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery"); +function (a) { "use strict"; var b = a.fn.jquery.split(" ")[0].split("."); if (b[0] < 2 && b[1] < 9 || 1 == b[0] && 9 == b[1] && b[2] < 1) throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher") }(jQuery), +function (a) { "use strict"; function b() { var a = document.createElement("bootstrap"), b = { WebkitTransition: "webkitTransitionEnd", MozTransition: "transitionend", OTransition: "oTransitionEnd otransitionend", transition: "transitionend" }; for (var c in b) if (void 0 !== a.style[c]) return { end: b[c] }; return !1 } a.fn.emulateTransitionEnd = function (b) { var c = !1, d = this; a(this).one("bsTransitionEnd", function () { c = !0 }); var e = function () { c || a(d).trigger(a.support.transition.end) }; return setTimeout(e, b), this }, a(function () { a.support.transition = b(), a.support.transition && (a.event.special.bsTransitionEnd = { bindType: a.support.transition.end, delegateType: a.support.transition.end, handle: function (b) { return a(b.target).is(this) ? b.handleObj.handler.apply(this, arguments) : void 0 } }) }) }(jQuery), +function (a) { "use strict"; function b(b) { return this.each(function () { var c = a(this), e = c.data("bs.alert"); e || c.data("bs.alert", e = new d(this)), "string" == typeof b && e[b].call(c) }) } var c = '[data-dismiss="alert"]', d = function (b) { a(b).on("click", c, this.close) }; d.VERSION = "3.3.5", d.TRANSITION_DURATION = 150, d.prototype.close = function (b) { function c() { g.detach().trigger("closed.bs.alert").remove() } var e = a(this), f = e.attr("data-target"); f || (f = e.attr("href"), f = f && f.replace(/.*(?=#[^\s]*$)/, "")); var g = a(f); b && b.preventDefault(), g.length || (g = e.closest(".alert")), g.trigger(b = a.Event("close.bs.alert")), b.isDefaultPrevented() || (g.removeClass("in"), a.support.transition && g.hasClass("fade") ? g.one("bsTransitionEnd", c).emulateTransitionEnd(d.TRANSITION_DURATION) : c()) }; var e = a.fn.alert; a.fn.alert = b, a.fn.alert.Constructor = d, a.fn.alert.noConflict = function () { return a.fn.alert = e, this }, a(document).on("click.bs.alert.data-api", c, d.prototype.close) }(jQuery), +function (a) { "use strict"; function b(b) { return this.each(function () { var d = a(this), e = d.data("bs.button"), f = "object" == typeof b && b; e || d.data("bs.button", e = new c(this, f)), "toggle" == b ? e.toggle() : b && e.setState(b) }) } var c = function (b, d) { this.$element = a(b), this.options = a.extend({}, c.DEFAULTS, d), this.isLoading = !1 }; c.VERSION = "3.3.5", c.DEFAULTS = { loadingText: "loading..." }, c.prototype.setState = function (b) { var c = "disabled", d = this.$element, e = d.is("input") ? "val" : "html", f = d.data(); b += "Text", null == f.resetText && d.data("resetText", d[e]()), setTimeout(a.proxy(function () { d[e](null == f[b] ? this.options[b] : f[b]), "loadingText" == b ? (this.isLoading = !0, d.addClass(c).attr(c, c)) : this.isLoading && (this.isLoading = !1, d.removeClass(c).removeAttr(c)) }, this), 0) }, c.prototype.toggle = function () { var a = !0, b = this.$element.closest('[data-toggle="buttons"]'); if (b.length) { var c = this.$element.find("input"); "radio" == c.prop("type") ? (c.prop("checked") && (a = !1), b.find(".active").removeClass("active"), this.$element.addClass("active")) : "checkbox" == c.prop("type") && (c.prop("checked") !== this.$element.hasClass("active") && (a = !1), this.$element.toggleClass("active")), c.prop("checked", this.$element.hasClass("active")), a && c.trigger("change") } else this.$element.attr("aria-pressed", !this.$element.hasClass("active")), this.$element.toggleClass("active") }; var d = a.fn.button; a.fn.button = b, a.fn.button.Constructor = c, a.fn.button.noConflict = function () { return a.fn.button = d, this }, a(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function (c) { var d = a(c.target); d.hasClass("btn") || (d = d.closest(".btn")), b.call(d, "toggle"), a(c.target).is('input[type="radio"]') || a(c.target).is('input[type="checkbox"]') || c.preventDefault() }).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]', function (b) { a(b.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(b.type)) }) }(jQuery), +function (a) { "use strict"; function b(b) { return this.each(function () { var d = a(this), e = d.data("bs.carousel"), f = a.extend({}, c.DEFAULTS, d.data(), "object" == typeof b && b), g = "string" == typeof b ? b : f.slide; e || d.data("bs.carousel", e = new c(this, f)), "number" == typeof b ? e.to(b) : g ? e[g]() : f.interval && e.pause().cycle() }) } var c = function (b, c) { this.$element = a(b), this.$indicators = this.$element.find(".carousel-indicators"), this.options = c, this.paused = null, this.sliding = null, this.interval = null, this.$active = null, this.$items = null, this.options.keyboard && this.$element.on("keydown.bs.carousel", a.proxy(this.keydown, this)), "hover" == this.options.pause && !("ontouchstart" in document.documentElement) && this.$element.on("mouseenter.bs.carousel", a.proxy(this.pause, this)).on("mouseleave.bs.carousel", a.proxy(this.cycle, this)) }; c.VERSION = "3.3.5", c.TRANSITION_DURATION = 600, c.DEFAULTS = { interval: 5e3, pause: "hover", wrap: !0, keyboard: !0 }, c.prototype.keydown = function (a) { if (!/input|textarea/i.test(a.target.tagName)) { switch (a.which) { case 37: this.prev(); break; case 39: this.next(); break; default: return } a.preventDefault() } }, c.prototype.cycle = function (b) { return b || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(a.proxy(this.next, this), this.options.interval)), this }, c.prototype.getItemIndex = function (a) { return this.$items = a.parent().children(".item"), this.$items.index(a || this.$active) }, c.prototype.getItemForDirection = function (a, b) { var c = this.getItemIndex(b), d = "prev" == a && 0 === c || "next" == a && c == this.$items.length - 1; if (d && !this.options.wrap) return b; var e = "prev" == a ? -1 : 1, f = (c + e) % this.$items.length; return this.$items.eq(f) }, c.prototype.to = function (a) { var b = this, c = this.getItemIndex(this.$active = this.$element.find(".item.active")); return a > this.$items.length - 1 || 0 > a ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function () { b.to(a) }) : c == a ? this.pause().cycle() : this.slide(a > c ? "next" : "prev", this.$items.eq(a)) }, c.prototype.pause = function (b) { return b || (this.paused = !0), this.$element.find(".next, .prev").length && a.support.transition && (this.$element.trigger(a.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this }, c.prototype.next = function () { return this.sliding ? void 0 : this.slide("next") }, c.prototype.prev = function () { return this.sliding ? void 0 : this.slide("prev") }, c.prototype.slide = function (b, d) { var e = this.$element.find(".item.active"), f = d || this.getItemForDirection(b, e), g = this.interval, h = "next" == b ? "left" : "right", i = this; if (f.hasClass("active")) return this.sliding = !1; var j = f[0], k = a.Event("slide.bs.carousel", { relatedTarget: j, direction: h }); if (this.$element.trigger(k), !k.isDefaultPrevented()) { if (this.sliding = !0, g && this.pause(), this.$indicators.length) { this.$indicators.find(".active").removeClass("active"); var l = a(this.$indicators.children()[this.getItemIndex(f)]); l && l.addClass("active") } var m = a.Event("slid.bs.carousel", { relatedTarget: j, direction: h }); return a.support.transition && this.$element.hasClass("slide") ? (f.addClass(b), f[0].offsetWidth, e.addClass(h), f.addClass(h), e.one("bsTransitionEnd", function () { f.removeClass([b, h].join(" ")).addClass("active"), e.removeClass(["active", h].join(" ")), i.sliding = !1, setTimeout(function () { i.$element.trigger(m) }, 0) }).emulateTransitionEnd(c.TRANSITION_DURATION)) : (e.removeClass("active"), f.addClass("active"), this.sliding = !1, this.$element.trigger(m)), g && this.cycle(), this } }; var d = a.fn.carousel; a.fn.carousel = b, a.fn.carousel.Constructor = c, a.fn.carousel.noConflict = function () { return a.fn.carousel = d, this }; var e = function (c) { var d, e = a(this), f = a(e.attr("data-target") || (d = e.attr("href")) && d.replace(/.*(?=#[^\s]+$)/, "")); if (f.hasClass("carousel")) { var g = a.extend({}, f.data(), e.data()), h = e.attr("data-slide-to"); h && (g.interval = !1), b.call(f, g), h && f.data("bs.carousel").to(h), c.preventDefault() } }; a(document).on("click.bs.carousel.data-api", "[data-slide]", e).on("click.bs.carousel.data-api", "[data-slide-to]", e), a(window).on("load", function () { a('[data-ride="carousel"]').each(function () { var c = a(this); b.call(c, c.data()) }) }) }(jQuery), +function (a) { "use strict"; function b(b) { var c, d = b.attr("data-target") || (c = b.attr("href")) && c.replace(/.*(?=#[^\s]+$)/, ""); return a(d) } function c(b) { return this.each(function () { var c = a(this), e = c.data("bs.collapse"), f = a.extend({}, d.DEFAULTS, c.data(), "object" == typeof b && b); !e && f.toggle && /show|hide/.test(b) && (f.toggle = !1), e || c.data("bs.collapse", e = new d(this, f)), "string" == typeof b && e[b]() }) } var d = function (b, c) { this.$element = a(b), this.options = a.extend({}, d.DEFAULTS, c), this.$trigger = a('[data-toggle="collapse"][href="#' + b.id + '"],[data-toggle="collapse"][data-target="#' + b.id + '"]'), this.transitioning = null, this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger), this.options.toggle && this.toggle() }; d.VERSION = "3.3.5", d.TRANSITION_DURATION = 350, d.DEFAULTS = { toggle: !0 }, d.prototype.dimension = function () { var a = this.$element.hasClass("width"); return a ? "width" : "height" }, d.prototype.show = function () { if (!this.transitioning && !this.$element.hasClass("in")) { var b, e = this.$parent && this.$parent.children(".panel").children(".in, .collapsing"); if (!(e && e.length && (b = e.data("bs.collapse"), b && b.transitioning))) { var f = a.Event("show.bs.collapse"); if (this.$element.trigger(f), !f.isDefaultPrevented()) { e && e.length && (c.call(e, "hide"), b || e.data("bs.collapse", null)); var g = this.dimension(); this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded", !0), this.$trigger.removeClass("collapsed").attr("aria-expanded", !0), this.transitioning = 1; var h = function () { this.$element.removeClass("collapsing").addClass("collapse in")[g](""), this.transitioning = 0, this.$element.trigger("shown.bs.collapse") }; if (!a.support.transition) return h.call(this); var i = a.camelCase(["scroll", g].join("-")); this.$element.one("bsTransitionEnd", a.proxy(h, this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i]) } } } }, d.prototype.hide = function () { if (!this.transitioning && this.$element.hasClass("in")) { var b = a.Event("hide.bs.collapse"); if (this.$element.trigger(b), !b.isDefaultPrevented()) { var c = this.dimension(); this.$element[c](this.$element[c]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1), this.$trigger.addClass("collapsed").attr("aria-expanded", !1), this.transitioning = 1; var e = function () { this.transitioning = 0, this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse") }; return a.support.transition ? void this.$element[c](0).one("bsTransitionEnd", a.proxy(e, this)).emulateTransitionEnd(d.TRANSITION_DURATION) : e.call(this) } } }, d.prototype.toggle = function () { this[this.$element.hasClass("in") ? "hide" : "show"]() }, d.prototype.getParent = function () { return a(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each(a.proxy(function (c, d) { var e = a(d); this.addAriaAndCollapsedClass(b(e), e) }, this)).end() }, d.prototype.addAriaAndCollapsedClass = function (a, b) { var c = a.hasClass("in"); a.attr("aria-expanded", c), b.toggleClass("collapsed", !c).attr("aria-expanded", c) }; var e = a.fn.collapse; a.fn.collapse = c, a.fn.collapse.Constructor = d, a.fn.collapse.noConflict = function () { return a.fn.collapse = e, this }, a(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function (d) { var e = a(this); e.attr("data-target") || d.preventDefault(); var f = b(e), g = f.data("bs.collapse"), h = g ? "toggle" : e.data(); c.call(f, h) }) }(jQuery), +function (a) { "use strict"; function b(b) { var c = b.attr("data-target"); c || (c = b.attr("href"), c = c && /#[A-Za-z]/.test(c) && c.replace(/.*(?=#[^\s]*$)/, "")); var d = c && a(c); return d && d.length ? d : b.parent() } function c(c) { c && 3 === c.which || (a(e).remove(), a(f).each(function () { var d = a(this), e = b(d), f = { relatedTarget: this }; e.hasClass("open") && (c && "click" == c.type && /input|textarea/i.test(c.target.tagName) && a.contains(e[0], c.target) || (e.trigger(c = a.Event("hide.bs.dropdown", f)), c.isDefaultPrevented() || (d.attr("aria-expanded", "false"), e.removeClass("open").trigger("hidden.bs.dropdown", f)))) })) } function d(b) { return this.each(function () { var c = a(this), d = c.data("bs.dropdown"); d || c.data("bs.dropdown", d = new g(this)), "string" == typeof b && d[b].call(c) }) } var e = ".dropdown-backdrop", f = '[data-toggle="dropdown"]', g = function (b) { a(b).on("click.bs.dropdown", this.toggle) }; g.VERSION = "3.3.5", g.prototype.toggle = function (d) { var e = a(this); if (!e.is(".disabled, :disabled")) { var f = b(e), g = f.hasClass("open"); if (c(), !g) { "ontouchstart" in document.documentElement && !f.closest(".navbar-nav").length && a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click", c); var h = { relatedTarget: this }; if (f.trigger(d = a.Event("show.bs.dropdown", h)), d.isDefaultPrevented()) return; e.trigger("focus").attr("aria-expanded", "true"), f.toggleClass("open").trigger("shown.bs.dropdown", h) } return !1 } }, g.prototype.keydown = function (c) { if (/(38|40|27|32)/.test(c.which) && !/input|textarea/i.test(c.target.tagName)) { var d = a(this); if (c.preventDefault(), c.stopPropagation(), !d.is(".disabled, :disabled")) { var e = b(d), g = e.hasClass("open"); if (!g && 27 != c.which || g && 27 == c.which) return 27 == c.which && e.find(f).trigger("focus"), d.trigger("click"); var h = " li:not(.disabled):visible a", i = e.find(".dropdown-menu" + h); if (i.length) { var j = i.index(c.target); 38 == c.which && j > 0 && j--, 40 == c.which && j < i.length - 1 && j++, ~j || (j = 0), i.eq(j).trigger("focus") } } } }; var h = a.fn.dropdown; a.fn.dropdown = d, a.fn.dropdown.Constructor = g, a.fn.dropdown.noConflict = function () { return a.fn.dropdown = h, this }, a(document).on("click.bs.dropdown.data-api", c).on("click.bs.dropdown.data-api", ".dropdown form", function (a) { a.stopPropagation() }).on("click.bs.dropdown.data-api", f, g.prototype.toggle).on("keydown.bs.dropdown.data-api", f, g.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", g.prototype.keydown) }(jQuery), +function (a) { "use strict"; function b(b, d) { return this.each(function () { var e = a(this), f = e.data("bs.modal"), g = a.extend({}, c.DEFAULTS, e.data(), "object" == typeof b && b); f || e.data("bs.modal", f = new c(this, g)), "string" == typeof b ? f[b](d) : g.show && f.show(d) }) } var c = function (b, c) { this.options = c, this.$body = a(document.body), this.$element = a(b), this.$dialog = this.$element.find(".modal-dialog"), this.$backdrop = null, this.isShown = null, this.originalBodyPad = null, this.scrollbarWidth = 0, this.ignoreBackdropClick = !1, this.options.remote && this.$element.find(".modal-content").load(this.options.remote, a.proxy(function () { this.$element.trigger("loaded.bs.modal") }, this)) }; c.VERSION = "3.3.5", c.TRANSITION_DURATION = 300, c.BACKDROP_TRANSITION_DURATION = 150, c.DEFAULTS = { backdrop: !0, keyboard: !0, show: !0 }, c.prototype.toggle = function (a) { return this.isShown ? this.hide() : this.show(a) }, c.prototype.show = function (b) { var d = this, e = a.Event("show.bs.modal", { relatedTarget: b }); this.$element.trigger(e), this.isShown || e.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.setScrollbar(), this.$body.addClass("modal-open"), this.escape(), this.resize(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', a.proxy(this.hide, this)), this.$dialog.on("mousedown.dismiss.bs.modal", function () { d.$element.one("mouseup.dismiss.bs.modal", function (b) { a(b.target).is(d.$element) && (d.ignoreBackdropClick = !0) }) }), this.backdrop(function () { var e = a.support.transition && d.$element.hasClass("fade"); d.$element.parent().length || d.$element.appendTo(d.$body), d.$element.show().scrollTop(0), d.adjustDialog(), e && d.$element[0].offsetWidth, d.$element.addClass("in"), d.enforceFocus(); var f = a.Event("shown.bs.modal", { relatedTarget: b }); e ? d.$dialog.one("bsTransitionEnd", function () { d.$element.trigger("focus").trigger(f) }).emulateTransitionEnd(c.TRANSITION_DURATION) : d.$element.trigger("focus").trigger(f) })) }, c.prototype.hide = function (b) { b && b.preventDefault(), b = a.Event("hide.bs.modal"), this.$element.trigger(b), this.isShown && !b.isDefaultPrevented() && (this.isShown = !1, this.escape(), this.resize(), a(document).off("focusin.bs.modal"), this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"), this.$dialog.off("mousedown.dismiss.bs.modal"), a.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", a.proxy(this.hideModal, this)).emulateTransitionEnd(c.TRANSITION_DURATION) : this.hideModal()) }, c.prototype.enforceFocus = function () { a(document).off("focusin.bs.modal").on("focusin.bs.modal", a.proxy(function (a) { this.$element[0] === a.target || this.$element.has(a.target).length || this.$element.trigger("focus") }, this)) }, c.prototype.escape = function () { this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", a.proxy(function (a) { 27 == a.which && this.hide() }, this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal") }, c.prototype.resize = function () { this.isShown ? a(window).on("resize.bs.modal", a.proxy(this.handleUpdate, this)) : a(window).off("resize.bs.modal") }, c.prototype.hideModal = function () { var a = this; this.$element.hide(), this.backdrop(function () { a.$body.removeClass("modal-open"), a.resetAdjustments(), a.resetScrollbar(), a.$element.trigger("hidden.bs.modal") }) }, c.prototype.removeBackdrop = function () { this.$backdrop && this.$backdrop.remove(), this.$backdrop = null }, c.prototype.backdrop = function (b) { var d = this, e = this.$element.hasClass("fade") ? "fade" : ""; if (this.isShown && this.options.backdrop) { var f = a.support.transition && e; if (this.$backdrop = a(document.createElement("div")).addClass("modal-backdrop " + e).appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", a.proxy(function (a) { return this.ignoreBackdropClick ? void (this.ignoreBackdropClick = !1) : void (a.target === a.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide())) }, this)), f && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !b) return; f ? this.$backdrop.one("bsTransitionEnd", b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION) : b() } else if (!this.isShown && this.$backdrop) { this.$backdrop.removeClass("in"); var g = function () { d.removeBackdrop(), b && b() }; a.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION) : g() } else b && b() }, c.prototype.handleUpdate = function () { this.adjustDialog() }, c.prototype.adjustDialog = function () { var a = this.$element[0].scrollHeight > document.documentElement.clientHeight; this.$element.css({ paddingLeft: !this.bodyIsOverflowing && a ? this.scrollbarWidth : "", paddingRight: this.bodyIsOverflowing && !a ? this.scrollbarWidth : "" }) }, c.prototype.resetAdjustments = function () { this.$element.css({ paddingLeft: "", paddingRight: "" }) }, c.prototype.checkScrollbar = function () { var a = window.innerWidth; if (!a) { var b = document.documentElement.getBoundingClientRect(); a = b.right - Math.abs(b.left) } this.bodyIsOverflowing = document.body.clientWidth < a, this.scrollbarWidth = this.measureScrollbar() }, c.prototype.setScrollbar = function () { var a = parseInt(this.$body.css("padding-right") || 0, 10); this.originalBodyPad = document.body.style.paddingRight || "", this.bodyIsOverflowing && this.$body.css("padding-right", a + this.scrollbarWidth) }, c.prototype.resetScrollbar = function () { this.$body.css("padding-right", this.originalBodyPad) }, c.prototype.measureScrollbar = function () { var a = document.createElement("div"); a.className = "modal-scrollbar-measure", this.$body.append(a); var b = a.offsetWidth - a.clientWidth; return this.$body[0].removeChild(a), b }; var d = a.fn.modal; a.fn.modal = b, a.fn.modal.Constructor = c, a.fn.modal.noConflict = function () { return a.fn.modal = d, this }, a(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function (c) { var d = a(this), e = d.attr("href"), f = a(d.attr("data-target") || e && e.replace(/.*(?=#[^\s]+$)/, "")), g = f.data("bs.modal") ? "toggle" : a.extend({ remote: !/#/.test(e) && e }, f.data(), d.data()); d.is("a") && c.preventDefault(), f.one("show.bs.modal", function (a) { a.isDefaultPrevented() || f.one("hidden.bs.modal", function () { d.is(":visible") && d.trigger("focus") }) }), b.call(f, g, this) }) }(jQuery), +function (a) { "use strict"; function b(b) { return this.each(function () { var d = a(this), e = d.data("bs.tooltip"), f = "object" == typeof b && b; (e || !/destroy|hide/.test(b)) && (e || d.data("bs.tooltip", e = new c(this, f)), "string" == typeof b && e[b]()) }) } var c = function (a, b) { this.type = null, this.options = null, this.enabled = null, this.timeout = null, this.hoverState = null, this.$element = null, this.inState = null, this.init("tooltip", a, b) }; c.VERSION = "3.3.5", c.TRANSITION_DURATION = 150, c.DEFAULTS = { animation: !0, placement: "top", selector: !1, template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>', trigger: "hover focus", title: "", delay: 0, html: !1, container: !1, viewport: { selector: "body", padding: 0 } }, c.prototype.init = function (b, c, d) { if (this.enabled = !0, this.type = b, this.$element = a(c), this.options = this.getOptions(d), this.$viewport = this.options.viewport && a(a.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport), this.inState = { click: !1, hover: !1, focus: !1 }, this.$element[0] instanceof document.constructor && !this.options.selector) throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!"); for (var e = this.options.trigger.split(" "), f = e.length; f--;) { var g = e[f]; if ("click" == g) this.$element.on("click." + this.type, this.options.selector, a.proxy(this.toggle, this)); else if ("manual" != g) { var h = "hover" == g ? "mouseenter" : "focusin", i = "hover" == g ? "mouseleave" : "focusout"; this.$element.on(h + "." + this.type, this.options.selector, a.proxy(this.enter, this)), this.$element.on(i + "." + this.type, this.options.selector, a.proxy(this.leave, this)) } } this.options.selector ? this._options = a.extend({}, this.options, { trigger: "manual", selector: "" }) : this.fixTitle() }, c.prototype.getDefaults = function () { return c.DEFAULTS }, c.prototype.getOptions = function (b) { return b = a.extend({}, this.getDefaults(), this.$element.data(), b), b.delay && "number" == typeof b.delay && (b.delay = { show: b.delay, hide: b.delay }), b }, c.prototype.getDelegateOptions = function () { var b = {}, c = this.getDefaults(); return this._options && a.each(this._options, function (a, d) { c[a] != d && (b[a] = d) }), b }, c.prototype.enter = function (b) { var c = b instanceof this.constructor ? b : a(b.currentTarget).data("bs." + this.type); return c || (c = new this.constructor(b.currentTarget, this.getDelegateOptions()), a(b.currentTarget).data("bs." + this.type, c)), b instanceof a.Event && (c.inState["focusin" == b.type ? "focus" : "hover"] = !0), c.tip().hasClass("in") || "in" == c.hoverState ? void (c.hoverState = "in") : (clearTimeout(c.timeout), c.hoverState = "in", c.options.delay && c.options.delay.show ? void (c.timeout = setTimeout(function () { "in" == c.hoverState && c.show() }, c.options.delay.show)) : c.show()) }, c.prototype.isInStateTrue = function () { for (var a in this.inState) if (this.inState[a]) return !0; return !1 }, c.prototype.leave = function (b) { var c = b instanceof this.constructor ? b : a(b.currentTarget).data("bs." + this.type); return c || (c = new this.constructor(b.currentTarget, this.getDelegateOptions()), a(b.currentTarget).data("bs." + this.type, c)), b instanceof a.Event && (c.inState["focusout" == b.type ? "focus" : "hover"] = !1), c.isInStateTrue() ? void 0 : (clearTimeout(c.timeout), c.hoverState = "out", c.options.delay && c.options.delay.hide ? void (c.timeout = setTimeout(function () { "out" == c.hoverState && c.hide() }, c.options.delay.hide)) : c.hide()) }, c.prototype.show = function () { var b = a.Event("show.bs." + this.type); if (this.hasContent() && this.enabled) { this.$element.trigger(b); var d = a.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]); if (b.isDefaultPrevented() || !d) return; var e = this, f = this.tip(), g = this.getUID(this.type); this.setContent(), f.attr("id", g), this.$element.attr("aria-describedby", g), this.options.animation && f.addClass("fade"); var h = "function" == typeof this.options.placement ? this.options.placement.call(this, f[0], this.$element[0]) : this.options.placement, i = /\s?auto?\s?/i, j = i.test(h); j && (h = h.replace(i, "") || "top"), f.detach().css({ top: 0, left: 0, display: "block" }).addClass(h).data("bs." + this.type, this), this.options.container ? f.appendTo(this.options.container) : f.insertAfter(this.$element), this.$element.trigger("inserted.bs." + this.type); var k = this.getPosition(), l = f[0].offsetWidth, m = f[0].offsetHeight; if (j) { var n = h, o = this.getPosition(this.$viewport); h = "bottom" == h && k.bottom + m > o.bottom ? "top" : "top" == h && k.top - m < o.top ? "bottom" : "right" == h && k.right + l > o.width ? "left" : "left" == h && k.left - l < o.left ? "right" : h, f.removeClass(n).addClass(h) } var p = this.getCalculatedOffset(h, k, l, m); this.applyPlacement(p, h); var q = function () { var a = e.hoverState; e.$element.trigger("shown.bs." + e.type), e.hoverState = null, "out" == a && e.leave(e) }; a.support.transition && this.$tip.hasClass("fade") ? f.one("bsTransitionEnd", q).emulateTransitionEnd(c.TRANSITION_DURATION) : q() } }, c.prototype.applyPlacement = function (b, c) { var d = this.tip(), e = d[0].offsetWidth, f = d[0].offsetHeight, g = parseInt(d.css("margin-top"), 10), h = parseInt(d.css("margin-left"), 10); isNaN(g) && (g = 0), isNaN(h) && (h = 0), b.top += g, b.left += h, a.offset.setOffset(d[0], a.extend({ using: function (a) { d.css({ top: Math.round(a.top), left: Math.round(a.left) }) } }, b), 0), d.addClass("in"); var i = d[0].offsetWidth, j = d[0].offsetHeight; "top" == c && j != f && (b.top = b.top + f - j); var k = this.getViewportAdjustedDelta(c, b, i, j); k.left ? b.left += k.left : b.top += k.top; var l = /top|bottom/.test(c), m = l ? 2 * k.left - e + i : 2 * k.top - f + j, n = l ? "offsetWidth" : "offsetHeight"; d.offset(b), this.replaceArrow(m, d[0][n], l) }, c.prototype.replaceArrow = function (a, b, c) { this.arrow().css(c ? "left" : "top", 50 * (1 - a / b) + "%").css(c ? "top" : "left", "") }, c.prototype.setContent = function () { var a = this.tip(), b = this.getTitle(); a.find(".tooltip-inner")[this.options.html ? "html" : "text"](b), a.removeClass("fade in top bottom left right") }, c.prototype.hide = function (b) { function d() { "in" != e.hoverState && f.detach(), e.$element.removeAttr("aria-describedby").trigger("hidden.bs." + e.type), b && b() } var e = this, f = a(this.$tip), g = a.Event("hide.bs." + this.type); return this.$element.trigger(g), g.isDefaultPrevented() ? void 0 : (f.removeClass("in"), a.support.transition && f.hasClass("fade") ? f.one("bsTransitionEnd", d).emulateTransitionEnd(c.TRANSITION_DURATION) : d(), this.hoverState = null, this) }, c.prototype.fixTitle = function () { var a = this.$element; (a.attr("title") || "string" != typeof a.attr("data-original-title")) && a.attr("data-original-title", a.attr("title") || "").attr("title", "") }, c.prototype.hasContent = function () { return this.getTitle() }, c.prototype.getPosition = function (b) { b = b || this.$element; var c = b[0], d = "BODY" == c.tagName, e = c.getBoundingClientRect(); null == e.width && (e = a.extend({}, e, { width: e.right - e.left, height: e.bottom - e.top })); var f = d ? { top: 0, left: 0 } : b.offset(), g = { scroll: d ? document.documentElement.scrollTop || document.body.scrollTop : b.scrollTop() }, h = d ? { width: a(window).width(), height: a(window).height() } : null; return a.extend({}, e, g, h, f) }, c.prototype.getCalculatedOffset = function (a, b, c, d) { return "bottom" == a ? { top: b.top + b.height, left: b.left + b.width / 2 - c / 2 } : "top" == a ? { top: b.top - d, left: b.left + b.width / 2 - c / 2 } : "left" == a ? { top: b.top + b.height / 2 - d / 2, left: b.left - c } : { top: b.top + b.height / 2 - d / 2, left: b.left + b.width } }, c.prototype.getViewportAdjustedDelta = function (a, b, c, d) { var e = { top: 0, left: 0 }; if (!this.$viewport) return e; var f = this.options.viewport && this.options.viewport.padding || 0, g = this.getPosition(this.$viewport); if (/right|left/.test(a)) { var h = b.top - f - g.scroll, i = b.top + f - g.scroll + d; h < g.top ? e.top = g.top - h : i > g.top + g.height && (e.top = g.top + g.height - i) } else { var j = b.left - f, k = b.left + f + c; j < g.left ? e.left = g.left - j : k > g.right && (e.left = g.left + g.width - k) } return e }, c.prototype.getTitle = function () { var a, b = this.$element, c = this.options; return a = b.attr("data-original-title") || ("function" == typeof c.title ? c.title.call(b[0]) : c.title) }, c.prototype.getUID = function (a) { do a += ~~(1e6 * Math.random()); while (document.getElementById(a)); return a }, c.prototype.tip = function () { if (!this.$tip && (this.$tip = a(this.options.template), 1 != this.$tip.length)) throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!"); return this.$tip }, c.prototype.arrow = function () { return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow") }, c.prototype.enable = function () { this.enabled = !0 }, c.prototype.disable = function () { this.enabled = !1 }, c.prototype.toggleEnabled = function () { this.enabled = !this.enabled }, c.prototype.toggle = function (b) { var c = this; b && (c = a(b.currentTarget).data("bs." + this.type), c || (c = new this.constructor(b.currentTarget, this.getDelegateOptions()), a(b.currentTarget).data("bs." + this.type, c))), b ? (c.inState.click = !c.inState.click, c.isInStateTrue() ? c.enter(c) : c.leave(c)) : c.tip().hasClass("in") ? c.leave(c) : c.enter(c) }, c.prototype.destroy = function () { var a = this; clearTimeout(this.timeout), this.hide(function () { a.$element.off("." + a.type).removeData("bs." + a.type), a.$tip && a.$tip.detach(), a.$tip = null, a.$arrow = null, a.$viewport = null }) }; var d = a.fn.tooltip; a.fn.tooltip = b, a.fn.tooltip.Constructor = c, a.fn.tooltip.noConflict = function () { return a.fn.tooltip = d, this } }(jQuery), +function (a) { "use strict"; function b(b) { return this.each(function () { var d = a(this), e = d.data("bs.popover"), f = "object" == typeof b && b; (e || !/destroy|hide/.test(b)) && (e || d.data("bs.popover", e = new c(this, f)), "string" == typeof b && e[b]()) }) } var c = function (a, b) { this.init("popover", a, b) }; if (!a.fn.tooltip) throw new Error("Popover requires tooltip.js"); c.VERSION = "3.3.5", c.DEFAULTS = a.extend({}, a.fn.tooltip.Constructor.DEFAULTS, { placement: "right", trigger: "click", content: "", template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>' }), c.prototype = a.extend({}, a.fn.tooltip.Constructor.prototype), c.prototype.constructor = c, c.prototype.getDefaults = function () { return c.DEFAULTS }, c.prototype.setContent = function () { var a = this.tip(), b = this.getTitle(), c = this.getContent(); a.find(".popover-title")[this.options.html ? "html" : "text"](b), a.find(".popover-content").children().detach().end()[this.options.html ? "string" == typeof c ? "html" : "append" : "text"](c), a.removeClass("fade top bottom left right in"), a.find(".popover-title").html() || a.find(".popover-title").hide() }, c.prototype.hasContent = function () { return this.getTitle() || this.getContent() }, c.prototype.getContent = function () { var a = this.$element, b = this.options; return a.attr("data-content") || ("function" == typeof b.content ? b.content.call(a[0]) : b.content) }, c.prototype.arrow = function () { return this.$arrow = this.$arrow || this.tip().find(".arrow") }; var d = a.fn.popover; a.fn.popover = b, a.fn.popover.Constructor = c, a.fn.popover.noConflict = function () { return a.fn.popover = d, this } }(jQuery), +function (a) {
        "use strict"; function b(c, d) { this.$body = a(document.body), this.$scrollElement = a(a(c).is(document.body) ? window : c), this.options = a.extend({}, b.DEFAULTS, d), this.selector = (this.options.target || "") + " .nav li > a", this.offsets = [], this.targets = [], this.activeTarget = null, this.scrollHeight = 0, this.$scrollElement.on("scroll.bs.scrollspy", a.proxy(this.process, this)), this.refresh(), this.process() } function c(c) { return this.each(function () { var d = a(this), e = d.data("bs.scrollspy"), f = "object" == typeof c && c; e || d.data("bs.scrollspy", e = new b(this, f)), "string" == typeof c && e[c]() }) } b.VERSION = "3.3.5", b.DEFAULTS = { offset: 10 }, b.prototype.getScrollHeight = function () { return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight) }, b.prototype.refresh = function () { var b = this, c = "offset", d = 0; this.offsets = [], this.targets = [], this.scrollHeight = this.getScrollHeight(), a.isWindow(this.$scrollElement[0]) || (c = "position", d = this.$scrollElement.scrollTop()), this.$body.find(this.selector).map(function () { var b = a(this), e = b.data("target") || b.attr("href"), f = /^#./.test(e) && a(e); return f && f.length && f.is(":visible") && [[f[c]().top + d, e]] || null }).sort(function (a, b) { return a[0] - b[0] }).each(function () { b.offsets.push(this[0]), b.targets.push(this[1]) }) }, b.prototype.process = function () { var a, b = this.$scrollElement.scrollTop() + this.options.offset, c = this.getScrollHeight(), d = this.options.offset + c - this.$scrollElement.height(), e = this.offsets, f = this.targets, g = this.activeTarget; if (this.scrollHeight != c && this.refresh(), b >= d) return g != (a = f[f.length - 1]) && this.activate(a); if (g && b < e[0]) return this.activeTarget = null, this.clear(); for (a = e.length; a--;) g != f[a] && b >= e[a] && (void 0 === e[a + 1] || b < e[a + 1]) && this.activate(f[a]) }, b.prototype.activate = function (b) {
            this.activeTarget = b, this.clear(); var c = this.selector + '[data-target="' + b + '"],' + this.selector + '[href="' + b + '"]', d = a(c).parents("li").addClass("active"); d.parent(".dropdown-menu").length && (d = d.closest("li.dropdown").addClass("active")),
            d.trigger("activate.bs.scrollspy")
        }, b.prototype.clear = function () { a(this.selector).parentsUntil(this.options.target, ".active").removeClass("active") }; var d = a.fn.scrollspy; a.fn.scrollspy = c, a.fn.scrollspy.Constructor = b, a.fn.scrollspy.noConflict = function () { return a.fn.scrollspy = d, this }, a(window).on("load.bs.scrollspy.data-api", function () { a('[data-spy="scroll"]').each(function () { var b = a(this); c.call(b, b.data()) }) })
    }(jQuery), +function (a) { "use strict"; function b(b) { return this.each(function () { var d = a(this), e = d.data("bs.tab"); e || d.data("bs.tab", e = new c(this)), "string" == typeof b && e[b]() }) } var c = function (b) { this.element = a(b) }; c.VERSION = "3.3.5", c.TRANSITION_DURATION = 150, c.prototype.show = function () { var b = this.element, c = b.closest("ul:not(.dropdown-menu)"), d = b.data("target"); if (d || (d = b.attr("href"), d = d && d.replace(/.*(?=#[^\s]*$)/, "")), !b.parent("li").hasClass("active")) { var e = c.find(".active:last a"), f = a.Event("hide.bs.tab", { relatedTarget: b[0] }), g = a.Event("show.bs.tab", { relatedTarget: e[0] }); if (e.trigger(f), b.trigger(g), !g.isDefaultPrevented() && !f.isDefaultPrevented()) { var h = a(d); this.activate(b.closest("li"), c), this.activate(h, h.parent(), function () { e.trigger({ type: "hidden.bs.tab", relatedTarget: b[0] }), b.trigger({ type: "shown.bs.tab", relatedTarget: e[0] }) }) } } }, c.prototype.activate = function (b, d, e) { function f() { g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !1), b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded", !0), h ? (b[0].offsetWidth, b.addClass("in")) : b.removeClass("fade"), b.parent(".dropdown-menu").length && b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !0), e && e() } var g = d.find("> .active"), h = e && a.support.transition && (g.length && g.hasClass("fade") || !!d.find("> .fade").length); g.length && h ? g.one("bsTransitionEnd", f).emulateTransitionEnd(c.TRANSITION_DURATION) : f(), g.removeClass("in") }; var d = a.fn.tab; a.fn.tab = b, a.fn.tab.Constructor = c, a.fn.tab.noConflict = function () { return a.fn.tab = d, this }; var e = function (c) { c.preventDefault(), b.call(a(this), "show") }; a(document).on("click.bs.tab.data-api", '[data-toggle="tab"]', e).on("click.bs.tab.data-api", '[data-toggle="pill"]', e) }(jQuery), +function (a) { "use strict"; function b(b) { return this.each(function () { var d = a(this), e = d.data("bs.affix"), f = "object" == typeof b && b; e || d.data("bs.affix", e = new c(this, f)), "string" == typeof b && e[b]() }) } var c = function (b, d) { this.options = a.extend({}, c.DEFAULTS, d), this.$target = a(this.options.target).on("scroll.bs.affix.data-api", a.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", a.proxy(this.checkPositionWithEventLoop, this)), this.$element = a(b), this.affixed = null, this.unpin = null, this.pinnedOffset = null, this.checkPosition() }; c.VERSION = "3.3.5", c.RESET = "affix affix-top affix-bottom", c.DEFAULTS = { offset: 0, target: window }, c.prototype.getState = function (a, b, c, d) { var e = this.$target.scrollTop(), f = this.$element.offset(), g = this.$target.height(); if (null != c && "top" == this.affixed) return c > e ? "top" : !1; if ("bottom" == this.affixed) return null != c ? e + this.unpin <= f.top ? !1 : "bottom" : a - d >= e + g ? !1 : "bottom"; var h = null == this.affixed, i = h ? e : f.top, j = h ? g : b; return null != c && c >= e ? "top" : null != d && i + j >= a - d ? "bottom" : !1 }, c.prototype.getPinnedOffset = function () { if (this.pinnedOffset) return this.pinnedOffset; this.$element.removeClass(c.RESET).addClass("affix"); var a = this.$target.scrollTop(), b = this.$element.offset(); return this.pinnedOffset = b.top - a }, c.prototype.checkPositionWithEventLoop = function () { setTimeout(a.proxy(this.checkPosition, this), 1) }, c.prototype.checkPosition = function () { if (this.$element.is(":visible")) { var b = this.$element.height(), d = this.options.offset, e = d.top, f = d.bottom, g = Math.max(a(document).height(), a(document.body).height()); "object" != typeof d && (f = e = d), "function" == typeof e && (e = d.top(this.$element)), "function" == typeof f && (f = d.bottom(this.$element)); var h = this.getState(g, b, e, f); if (this.affixed != h) { null != this.unpin && this.$element.css("top", ""); var i = "affix" + (h ? "-" + h : ""), j = a.Event(i + ".bs.affix"); if (this.$element.trigger(j), j.isDefaultPrevented()) return; this.affixed = h, this.unpin = "bottom" == h ? this.getPinnedOffset() : null, this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix", "affixed") + ".bs.affix") } "bottom" == h && this.$element.offset({ top: g - b - f }) } }; var d = a.fn.affix; a.fn.affix = b, a.fn.affix.Constructor = c, a.fn.affix.noConflict = function () { return a.fn.affix = d, this }, a(window).on("load", function () { a('[data-spy="affix"]').each(function () { var c = a(this), d = c.data(); d.offset = d.offset || {}, null != d.offsetBottom && (d.offset.bottom = d.offsetBottom), null != d.offsetTop && (d.offset.top = d.offsetTop), b.call(c, d) }) }) }(jQuery);

    /*!
    * Cropper v1.0.0
    * https://github.com/fengyuanchen/cropper
    *
    * Copyright (c) 2014-2015 Fengyuan Chen and contributors
    * Released under the MIT license
    *
    * Date: 2015-10-10T02:10:08.624Z
    */
    !function (t) { "function" == typeof define && define.amd ? define(["jquery"], t) : t("object" == typeof exports ? require("jquery") : jQuery) }(function (t) { "use strict"; function i(t) { return "number" == typeof t && !isNaN(t) } function e(t) { return "undefined" == typeof t } function s(t, e) { var s = []; return i(e) && s.push(e), s.slice.apply(t, s) } function o(t, i) { var e = s(arguments, 2); return function () { return t.apply(i, e.concat(s(arguments))) } } function h(t) { var i = t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i); return i && (i[1] !== f.protocol || i[2] !== f.hostname || i[3] !== f.port) } function a(t) { var i = "timestamp=" + (new Date).getTime(); return t + (-1 === t.indexOf("?") ? "?" : "&") + i } function n(t) { return t ? ' crossOrigin="' + t + '"' : "" } function r(t, i) { var e; return t.naturalWidth ? i(t.naturalWidth, t.naturalHeight) : (e = document.createElement("img"), e.onload = function () { i(this.width, this.height) }, void (e.src = t.src)) } function p(t) { var e = [], s = t.rotate, o = t.scaleX, h = t.scaleY; return i(s) && e.push("rotate(" + s + "deg)"), i(o) && i(h) && e.push("scale(" + o + "," + h + ")"), e.length ? e.join(" ") : "none" } function c(t, i) { var e, s, o = at(t.degree) % 180, h = (o > 90 ? 180 - o : o) * Math.PI / 180, a = nt(h), n = rt(h), r = t.width, p = t.height, c = t.aspectRatio; return i ? (e = r / (n + a / c), s = e / c) : (e = r * n + p * a, s = r * a + p * n), { width: e, height: s } } function d(e, s) { var o, h, a, n = t("<canvas>")[0], r = n.getContext("2d"), p = 0, d = 0, l = s.naturalWidth, g = s.naturalHeight, u = s.rotate, f = s.scaleX, m = s.scaleY, v = i(f) && i(m) && (1 !== f || 1 !== m), w = i(u) && 0 !== u, x = w || v, b = l, C = g; return v && (o = l / 2, h = g / 2), w && (a = c({ width: l, height: g, degree: u }), b = a.width, C = a.height, o = a.width / 2, h = a.height / 2), n.width = b, n.height = C, x && (p = -l / 2, d = -g / 2, r.save(), r.translate(o, h)), w && r.rotate(u * Math.PI / 180), v && r.scale(f, m), r.drawImage(e, p, d, l, g), x && r.restore(), n } function l(i, e) { this.$element = t(i), this.options = t.extend({}, l.DEFAULTS, t.isPlainObject(e) && e), this.ready = !1, this.built = !1, this.complete = !1, this.rotated = !1, this.cropped = !1, this.disabled = !1, this.replaced = !1, this.isImg = !1, this.originalUrl = "", this.crossOrigin = "", this.canvas = null, this.cropBox = null, this.init() } var g = t(window), u = t(document), f = window.location, m = "cropper", v = "cropper-modal", w = "cropper-hide", x = "cropper-hidden", b = "cropper-invisible", C = "cropper-move", y = "cropper-crop", B = "cropper-disabled", $ = "cropper-bg", D = "mousedown touchstart pointerdown MSPointerDown", Y = "mousemove touchmove pointermove MSPointerMove", X = "mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel", T = "wheel mousewheel DOMMouseScroll", k = "dblclick", M = "load." + m, W = "error." + m, L = "resize." + m, H = "build." + m, R = "built." + m, z = "cropstart." + m, I = "cropmove." + m, P = "cropend." + m, E = "crop." + m, F = "zoom." + m, O = /^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/, S = "preview", j = "action", A = "e", N = "w", U = "s", Z = "n", _ = "se", q = "sw", K = "ne", Q = "nw", G = "all", J = "crop", V = "move", tt = "zoom", it = "none", et = t.isFunction(t("<canvas>")[0].getContext), st = Math.sqrt, ot = Math.min, ht = Math.max, at = Math.abs, nt = Math.sin, rt = Math.cos, pt = parseFloat, ct = { version: "1.0.0" }; t.extend(ct, { init: function () { var t, i = this.$element; if (i.is("img")) { if (this.isImg = !0, this.originalUrl = t = i.attr("src"), !t) return; t = i.prop("src") } else i.is("canvas") && et && (t = i[0].toDataURL()); this.load(t) }, trigger: function (i, e) { var s = t.Event(i, e); return this.$element.trigger(s), s }, load: function (i) { var e, s, o = this.options, r = this.$element, p = ""; i && (this.url = i, r.one(H, o.build), this.trigger(H).isDefaultPrevented() || (o.checkImageOrigin && h(i) && (p = r.prop("crossOrigin"), p || (p = "anonymous", e = a(i)), this.crossOrigin = p), this.$clone = s = t("<img" + n(p) + ' src="' + (e || i) + '">'), this.isImg ? r[0].complete ? this.start() : r.one(M, t.proxy(this.start, this)) : s.one(M, t.proxy(this.start, this)).one(W, t.proxy(this.stop, this)).addClass(w).insertAfter(r))) }, start: function () { var i = this.$element, e = this.$clone; this.isImg || (e.off(W, this.stop), i = e), r(i[0], t.proxy(function (t, i) { this.image = { naturalWidth: t, naturalHeight: i, aspectRatio: t / i }, this.ready = !0, this.build() }, this)) }, stop: function () { this.$clone.remove(), this.$clone = null } }), t.extend(ct, { build: function () { var i, e, s, o = this.options, h = this.$element, a = this.$clone; this.ready && (this.built && this.unbuild(), this.$container = h.parent(), this.$cropper = i = t(l.TEMPLATE), this.$canvas = i.find(".cropper-canvas").append(a), this.$dragBox = i.find(".cropper-drag-box"), this.$cropBox = e = i.find(".cropper-crop-box"), this.$viewBox = i.find(".cropper-view-box"), this.$face = s = e.find(".cropper-face"), h.addClass(x).after(i), this.isImg || a.removeClass(w), this.initPreview(), this.bind(), o.aspectRatio = pt(o.aspectRatio) || NaN, o.autoCrop ? (this.cropped = !0, o.modal && this.$dragBox.addClass(v)) : e.addClass(x), o.guides || e.find(".cropper-dashed").addClass(x), o.center || e.find(".cropper-center").addClass(x), o.cropBoxMovable && s.addClass(C).data(j, G), o.highlight || s.addClass(b), o.background && i.addClass($), o.cropBoxResizable || e.find(".cropper-line, .cropper-point").addClass(x), this.setDragMode(o.dragCrop ? J : o.movable ? V : it), this.render(), this.built = !0, this.setData(o.data), h.one(R, o.built), setTimeout(t.proxy(function () { this.trigger(R), this.complete = !0 }, this), 0)) }, unbuild: function () { this.built && (this.built = !1, this.initialImage = null, this.initialCanvas = null, this.initialCropBox = null, this.container = null, this.canvas = null, this.cropBox = null, this.unbind(), this.resetPreview(), this.$preview = null, this.$viewBox = null, this.$cropBox = null, this.$dragBox = null, this.$canvas = null, this.$container = null, this.$cropper.remove(), this.$cropper = null) } }), t.extend(ct, { render: function () { this.initContainer(), this.initCanvas(), this.initCropBox(), this.renderCanvas(), this.cropped && this.renderCropBox() }, initContainer: function () { var t = this.options, i = this.$element, e = this.$container, s = this.$cropper; s.addClass(x), i.removeClass(x), s.css(this.container = { width: ht(e.width(), pt(t.minContainerWidth) || 200), height: ht(e.height(), pt(t.minContainerHeight) || 100) }), i.addClass(x), s.removeClass(x) }, initCanvas: function () { var i = this.container, e = i.width, s = i.height, o = this.image, h = o.aspectRatio, a = { aspectRatio: h, width: e, height: s }; s * h > e ? a.height = e / h : a.width = s * h, a.oldLeft = a.left = (e - a.width) / 2, a.oldTop = a.top = (s - a.height) / 2, this.canvas = a, this.limitCanvas(!0, !0), this.initialImage = t.extend({}, o), this.initialCanvas = t.extend({}, a) }, limitCanvas: function (t, i) { var e, s, o = this.options, h = o.strict, a = this.container, n = a.width, r = a.height, p = this.canvas, c = p.aspectRatio, d = this.cropBox, l = this.cropped && d, g = this.initialCanvas || p; t && (e = pt(o.minCanvasWidth) || 0, s = pt(o.minCanvasHeight) || 0, h && (e ? e = ht(e, l ? d.width : g.width) : s ? s = ht(s, l ? d.height : g.height) : l && (e = d.width, s = d.height, s * c > e ? e = s * c : s = e / c)), e && s ? s * c > e ? s = e / c : e = s * c : e ? s = e / c : s && (e = s * c), p.minWidth = e, p.minHeight = s, p.maxWidth = 1 / 0, p.maxHeight = 1 / 0), i && (h ? (p.minLeft = l ? ot(d.left, d.left + d.width - p.width) : ot(0, n - p.width), p.minTop = l ? ot(d.top, d.top + d.height - p.height) : ot(0, r - p.height), p.maxLeft = l ? d.left : ht(0, n - p.width), p.maxTop = l ? d.top : ht(0, r - p.height)) : (p.minLeft = -p.width, p.minTop = -p.height, p.maxLeft = n, p.maxTop = r)) }, renderCanvas: function (t) { var i, e, s = this.options, o = this.canvas, h = this.image; this.rotated && (this.rotated = !1, e = c({ width: h.width, height: h.height, degree: h.rotate }), i = e.width / e.height, i !== o.aspectRatio && (o.left -= (e.width - o.width) / 2, o.top -= (e.height - o.height) / 2, o.width = e.width, o.height = e.height, o.aspectRatio = i, this.limitCanvas(!0, !1))), (o.width > o.maxWidth || o.width < o.minWidth) && (o.left = o.oldLeft), (o.height > o.maxHeight || o.height < o.minHeight) && (o.top = o.oldTop), o.width = ot(ht(o.width, o.minWidth), o.maxWidth), o.height = ot(ht(o.height, o.minHeight), o.maxHeight), this.limitCanvas(!1, !0), o.oldLeft = o.left = ot(ht(o.left, o.minLeft), o.maxLeft), o.oldTop = o.top = ot(ht(o.top, o.minTop), o.maxTop), this.$canvas.css({ width: o.width, height: o.height, left: o.left, top: o.top }), this.renderImage(), this.cropped && s.strict && this.limitCropBox(!0, !0), t && this.output() }, renderImage: function (i) { var e, s = this.canvas, o = this.image; o.rotate && (e = c({ width: s.width, height: s.height, degree: o.rotate, aspectRatio: o.aspectRatio }, !0)), t.extend(o, e ? { width: e.width, height: e.height, left: (s.width - e.width) / 2, top: (s.height - e.height) / 2 } : { width: s.width, height: s.height, left: 0, top: 0 }), this.$clone.css({ width: o.width, height: o.height, marginLeft: o.left, marginTop: o.top, transform: p(o) }), i && this.output() }, initCropBox: function () { var i = this.options, e = this.canvas, s = i.aspectRatio, o = pt(i.autoCropArea) || .8, h = { width: e.width, height: e.height }; s && (e.height * s > e.width ? h.height = h.width / s : h.width = h.height * s), this.cropBox = h, this.limitCropBox(!0, !0), h.width = ot(ht(h.width, h.minWidth), h.maxWidth), h.height = ot(ht(h.height, h.minHeight), h.maxHeight), h.width = ht(h.minWidth, h.width * o), h.height = ht(h.minHeight, h.height * o), h.oldLeft = h.left = e.left + (e.width - h.width) / 2, h.oldTop = h.top = e.top + (e.height - h.height) / 2, this.initialCropBox = t.extend({}, h) }, limitCropBox: function (t, i) { var e, s, o, h, a = this.options, n = a.strict, r = this.container, p = r.width, c = r.height, d = this.canvas, l = this.cropBox, g = a.aspectRatio; t && (e = pt(a.minCropBoxWidth) || 0, s = pt(a.minCropBoxHeight) || 0, e = ot(e, p), s = ot(s, c), o = ot(p, n ? d.width : p), h = ot(c, n ? d.height : c), g && (e && s ? s * g > e ? s = e / g : e = s * g : e ? s = e / g : s && (e = s * g), h * g > o ? h = o / g : o = h * g), l.minWidth = ot(e, o), l.minHeight = ot(s, h), l.maxWidth = o, l.maxHeight = h), i && (n ? (l.minLeft = ht(0, d.left), l.minTop = ht(0, d.top), l.maxLeft = ot(p, d.left + d.width) - l.width, l.maxTop = ot(c, d.top + d.height) - l.height) : (l.minLeft = 0, l.minTop = 0, l.maxLeft = p - l.width, l.maxTop = c - l.height)) }, renderCropBox: function () { var t = this.options, i = this.container, e = i.width, s = i.height, o = this.cropBox; (o.width > o.maxWidth || o.width < o.minWidth) && (o.left = o.oldLeft), (o.height > o.maxHeight || o.height < o.minHeight) && (o.top = o.oldTop), o.width = ot(ht(o.width, o.minWidth), o.maxWidth), o.height = ot(ht(o.height, o.minHeight), o.maxHeight), this.limitCropBox(!1, !0), o.oldLeft = o.left = ot(ht(o.left, o.minLeft), o.maxLeft), o.oldTop = o.top = ot(ht(o.top, o.minTop), o.maxTop), t.movable && t.cropBoxMovable && this.$face.data(j, o.width === e && o.height === s ? V : G), this.$cropBox.css({ width: o.width, height: o.height, left: o.left, top: o.top }), this.cropped && t.strict && this.limitCanvas(!0, !0), this.disabled || this.output() }, output: function () { this.preview(), this.complete ? this.trigger(E, this.getData()) : this.built || this.$element.one(R, t.proxy(function () { this.trigger(E, this.getData()) }, this)) } }), t.extend(ct, { initPreview: function () { var i = n(this.crossOrigin), e = this.url; this.$preview = t(this.options.preview), this.$viewBox.html("<img" + i + ' src="' + e + '">'), this.$preview.each(function () { var s = t(this); s.data(S, { width: s.width(), height: s.height(), original: s.html() }), s.html("<img" + i + ' src="' + e + '" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important">') }) }, resetPreview: function () { this.$preview.each(function () { var i = t(this); i.html(i.data(S).original).removeData(S) }) }, preview: function () { var i = this.image, e = this.canvas, s = this.cropBox, o = s.width, h = s.height, a = i.width, n = i.height, r = s.left - e.left - i.left, c = s.top - e.top - i.top; this.cropped && !this.disabled && (this.$viewBox.find("img").css({ width: a, height: n, marginLeft: -r, marginTop: -c, transform: p(i) }), this.$preview.each(function () { var e = t(this), s = e.data(S), d = s.width, l = s.height, g = d, u = l, f = 1; o && (f = d / o, u = h * f), h && u > l && (f = l / h, g = o * f, u = l), e.width(g).height(u).find("img").css({ width: a * f, height: n * f, marginLeft: -r * f, marginTop: -c * f, transform: p(i) }) })) } }), t.extend(ct, { bind: function () { var i = this.options, e = this.$element, s = this.$cropper; t.isFunction(i.cropstart) && e.on(z, i.cropstart), t.isFunction(i.cropmove) && e.on(I, i.cropmove), t.isFunction(i.cropend) && e.on(P, i.cropend), t.isFunction(i.crop) && e.on(E, i.crop), t.isFunction(i.zoom) && e.on(F, i.zoom), s.on(D, t.proxy(this.cropStart, this)), i.zoomable && i.mouseWheelZoom && s.on(T, t.proxy(this.wheel, this)), i.doubleClickToggle && s.on(k, t.proxy(this.dblclick, this)), u.on(Y, this._cropMove = o(this.cropMove, this)).on(X, this._cropEnd = o(this.cropEnd, this)), i.responsive && g.on(L, this._resize = o(this.resize, this)) }, unbind: function () { var i = this.options, e = this.$element, s = this.$cropper; t.isFunction(i.cropstart) && e.off(z, i.cropstart), t.isFunction(i.cropmove) && e.off(I, i.cropmove), t.isFunction(i.cropend) && e.off(P, i.cropend), t.isFunction(i.crop) && e.off(E, i.crop), t.isFunction(i.zoom) && e.off(F, i.zoom), s.off(D, this.cropStart), i.zoomable && i.mouseWheelZoom && s.off(T, this.wheel), i.doubleClickToggle && s.off(k, this.dblclick), u.off(Y, this._cropMove).off(X, this._cropEnd), i.responsive && g.off(L, this._resize) } }), t.extend(ct, { resize: function () { var i, e, s, o = this.$container, h = this.container; !this.disabled && h && (s = o.width() / h.width, (1 !== s || o.height() !== h.height) && (i = this.getCanvasData(), e = this.getCropBoxData(), this.render(), this.setCanvasData(t.each(i, function (t, e) { i[t] = e * s })), this.setCropBoxData(t.each(e, function (t, i) { e[t] = i * s })))) }, dblclick: function () { this.disabled || (this.$dragBox.hasClass(y) ? this.setDragMode(V) : this.setDragMode(J)) }, wheel: function (t) { var i = t.originalEvent, e = i, s = pt(this.options.wheelZoomRatio) || .1, o = 1; this.disabled || (t.preventDefault(), e.deltaY ? o = e.deltaY > 0 ? 1 : -1 : e.wheelDelta ? o = -e.wheelDelta / 120 : e.detail && (o = e.detail > 0 ? 1 : -1), this.zoom(-o * s, i)) }, cropStart: function (i) { var e, s, o = this.options, h = i.originalEvent, a = h && h.touches, n = i; if (!this.disabled) { if (a) { if (e = a.length, e > 1) { if (!o.zoomable || !o.touchDragZoom || 2 !== e) return; n = a[1], this.startX2 = n.pageX, this.startY2 = n.pageY, s = tt } n = a[0] } if (s = s || t(n.target).data(j), O.test(s)) { if (this.trigger(z, { originalEvent: h, action: s }).isDefaultPrevented()) return; i.preventDefault(), this.action = s, this.cropping = !1, this.startX = n.pageX || h && h.pageX, this.startY = n.pageY || h && h.pageY, s === J && (this.cropping = !0, this.$dragBox.addClass(v)) } } }, cropMove: function (t) { var i, e = this.options, s = t.originalEvent, o = s && s.touches, h = t, a = this.action; if (!this.disabled) { if (o) { if (i = o.length, i > 1) { if (!e.zoomable || !e.touchDragZoom || 2 !== i) return; h = o[1], this.endX2 = h.pageX, this.endY2 = h.pageY } h = o[0] } if (a) { if (this.trigger(I, { originalEvent: s, action: a }).isDefaultPrevented()) return; t.preventDefault(), this.endX = h.pageX || s && s.pageX, this.endY = h.pageY || s && s.pageY, this.change(h.shiftKey, a === tt ? s : null) } } }, cropEnd: function (t) { var i = t.originalEvent, e = this.action; this.disabled || e && (t.preventDefault(), this.cropping && (this.cropping = !1, this.$dragBox.toggleClass(v, this.cropped && this.options.modal)), this.action = "", this.trigger(P, { originalEvent: i, action: e })) } }), t.extend(ct, { change: function (t, i) { var e, s, o = this.options, h = o.aspectRatio, a = this.action, n = this.container, r = this.canvas, p = this.cropBox, c = p.width, d = p.height, l = p.left, g = p.top, u = l + c, f = g + d, m = 0, v = 0, w = n.width, b = n.height, C = !0; switch (!h && t && (h = c && d ? c / d : 1), o.strict && (m = p.minLeft, v = p.minTop, w = m + ot(n.width, r.width), b = v + ot(n.height, r.height)), s = { x: this.endX - this.startX, y: this.endY - this.startY }, h && (s.X = s.y * h, s.Y = s.x / h), a) { case G: l += s.x, g += s.y; break; case A: if (s.x >= 0 && (u >= w || h && (v >= g || f >= b))) { C = !1; break } c += s.x, h && (d = c / h, g -= s.Y / 2), 0 > c && (a = N, c = 0); break; case Z: if (s.y <= 0 && (v >= g || h && (m >= l || u >= w))) { C = !1; break } d -= s.y, g += s.y, h && (c = d * h, l += s.X / 2), 0 > d && (a = U, d = 0); break; case N: if (s.x <= 0 && (m >= l || h && (v >= g || f >= b))) { C = !1; break } c -= s.x, l += s.x, h && (d = c / h, g += s.Y / 2), 0 > c && (a = A, c = 0); break; case U: if (s.y >= 0 && (f >= b || h && (m >= l || u >= w))) { C = !1; break } d += s.y, h && (c = d * h, l -= s.X / 2), 0 > d && (a = Z, d = 0); break; case K: if (h) { if (s.y <= 0 && (v >= g || u >= w)) { C = !1; break } d -= s.y, g += s.y, c = d * h } else s.x >= 0 ? w > u ? c += s.x : s.y <= 0 && v >= g && (C = !1) : c += s.x, s.y <= 0 ? g > v && (d -= s.y, g += s.y) : (d -= s.y, g += s.y); 0 > c && 0 > d ? (a = q, d = 0, c = 0) : 0 > c ? (a = Q, c = 0) : 0 > d && (a = _, d = 0); break; case Q: if (h) { if (s.y <= 0 && (v >= g || m >= l)) { C = !1; break } d -= s.y, g += s.y, c = d * h, l += s.X } else s.x <= 0 ? l > m ? (c -= s.x, l += s.x) : s.y <= 0 && v >= g && (C = !1) : (c -= s.x, l += s.x), s.y <= 0 ? g > v && (d -= s.y, g += s.y) : (d -= s.y, g += s.y); 0 > c && 0 > d ? (a = _, d = 0, c = 0) : 0 > c ? (a = K, c = 0) : 0 > d && (a = q, d = 0); break; case q: if (h) { if (s.x <= 0 && (m >= l || f >= b)) { C = !1; break } c -= s.x, l += s.x, d = c / h } else s.x <= 0 ? l > m ? (c -= s.x, l += s.x) : s.y >= 0 && f >= b && (C = !1) : (c -= s.x, l += s.x), s.y >= 0 ? b > f && (d += s.y) : d += s.y; 0 > c && 0 > d ? (a = K, d = 0, c = 0) : 0 > c ? (a = _, c = 0) : 0 > d && (a = Q, d = 0); break; case _: if (h) { if (s.x >= 0 && (u >= w || f >= b)) { C = !1; break } c += s.x, d = c / h } else s.x >= 0 ? w > u ? c += s.x : s.y >= 0 && f >= b && (C = !1) : c += s.x, s.y >= 0 ? b > f && (d += s.y) : d += s.y; 0 > c && 0 > d ? (a = Q, d = 0, c = 0) : 0 > c ? (a = q, c = 0) : 0 > d && (a = K, d = 0); break; case V: this.move(s.x, s.y), C = !1; break; case tt: this.zoom(function (t, i, e, s) { var o = st(t * t + i * i), h = st(e * e + s * s); return (h - o) / o }(at(this.startX - this.startX2), at(this.startY - this.startY2), at(this.endX - this.endX2), at(this.endY - this.endY2)), i), this.startX2 = this.endX2, this.startY2 = this.endY2, C = !1; break; case J: s.x && s.y && (e = this.$cropper.offset(), l = this.startX - e.left, g = this.startY - e.top, c = p.minWidth, d = p.minHeight, s.x > 0 ? s.y > 0 ? a = _ : (a = K, g -= d) : s.y > 0 ? (a = q, l -= c) : (a = Q, l -= c, g -= d), this.cropped || (this.cropped = !0, this.$cropBox.removeClass(x))) } C && (p.width = c, p.height = d, p.left = l, p.top = g, this.action = a, this.renderCropBox()), this.startX = this.endX, this.startY = this.endY } }), t.extend(ct, { crop: function () { this.built && !this.disabled && (this.cropped || (this.cropped = !0, this.limitCropBox(!0, !0), this.options.modal && this.$dragBox.addClass(v), this.$cropBox.removeClass(x)), this.setCropBoxData(this.initialCropBox)) }, reset: function () { this.built && !this.disabled && (this.image = t.extend({}, this.initialImage), this.canvas = t.extend({}, this.initialCanvas), this.cropBox = t.extend({}, this.initialCropBox), this.renderCanvas(), this.cropped && this.renderCropBox()) }, clear: function () { this.cropped && !this.disabled && (t.extend(this.cropBox, { left: 0, top: 0, width: 0, height: 0 }), this.cropped = !1, this.renderCropBox(), this.limitCanvas(!0, !0), this.renderCanvas(), this.$dragBox.removeClass(v), this.$cropBox.addClass(x)) }, replace: function (t) { !this.disabled && t && (this.isImg && (this.replaced = !0, this.$element.attr("src", t)), this.options.data = null, this.load(t)) }, enable: function () { this.built && (this.disabled = !1, this.$cropper.removeClass(B)) }, disable: function () { this.built && (this.disabled = !0, this.$cropper.addClass(B)) }, destroy: function () { var t = this.$element; this.ready ? (this.isImg && this.replaced && t.attr("src", this.originalUrl), this.unbuild(), t.removeClass(x)) : this.isImg ? t.off(M, this.start) : this.$clone && this.$clone.remove(), t.removeData(m) }, move: function (t, s) { var o = this.canvas; e(s) && (s = t), t = pt(t), s = pt(s), this.built && !this.disabled && this.options.movable && (o.left += i(t) ? t : 0, o.top += i(s) ? s : 0, this.renderCanvas(!0)) }, zoom: function (t, i) { var e, s, o = this.canvas; if (t = pt(t), t && this.built && !this.disabled && this.options.zoomable) { if (this.trigger(F, { originalEvent: i, ratio: t }).isDefaultPrevented()) return; t = 0 > t ? 1 / (1 - t) : 1 + t, e = o.width * t, s = o.height * t, o.left -= (e - o.width) / 2, o.top -= (s - o.height) / 2, o.width = e, o.height = s, this.renderCanvas(!0), this.setDragMode(V) } }, rotate: function (t) { var i = this.image, e = i.rotate || 0; t = pt(t) || 0, this.built && !this.disabled && this.options.rotatable && (i.rotate = (e + t) % 360, this.rotated = !0, this.renderCanvas(!0)) }, scale: function (t, s) { var o = this.image; e(s) && (s = t), t = pt(t), s = pt(s), this.built && !this.disabled && this.options.scalable && (o.scaleX = i(t) ? t : 1, o.scaleY = i(s) ? s : 1, this.renderImage(!0)) }, getData: function (i) { var e, s, o = this.options, h = this.image, a = this.canvas, n = this.cropBox; return this.built && this.cropped ? (s = { x: n.left - a.left, y: n.top - a.top, width: n.width, height: n.height }, e = h.width / h.naturalWidth, t.each(s, function (t, o) { o /= e, s[t] = i ? Math.round(o) : o })) : s = { x: 0, y: 0, width: 0, height: 0 }, o.rotatable && (s.rotate = h.rotate || 0), o.scalable && (s.scaleX = h.scaleX || 1, s.scaleY = h.scaleY || 1), s }, setData: function (e) { var s, o, h, a = this.options, n = this.image, r = this.canvas, p = {}; t.isFunction(e) && (e = e.call(this.element)), this.built && !this.disabled && t.isPlainObject(e) && (a.rotatable && i(e.rotate) && e.rotate !== n.rotate && (n.rotate = e.rotate, this.rotated = s = !0), a.scalable && (i(e.scaleX) && e.scaleX !== n.scaleX && (n.scaleX = e.scaleX, o = !0), i(e.scaleY) && e.scaleY !== n.scaleY && (n.scaleY = e.scaleY, o = !0)), s ? this.renderCanvas() : o && this.renderImage(), h = n.width / n.naturalWidth, i(e.x) && (p.left = e.x * h + r.left), i(e.y) && (p.top = e.y * h + r.top), i(e.width) && (p.width = e.width * h), i(e.height) && (p.height = e.height * h), this.setCropBoxData(p)) }, getContainerData: function () { return this.built ? this.container : {} }, getImageData: function () { return this.ready ? this.image : {} }, getCanvasData: function () { var t, i = this.canvas; return this.built && (t = { left: i.left, top: i.top, width: i.width, height: i.height }), t || {} }, setCanvasData: function (e) { var s = this.canvas, o = s.aspectRatio; t.isFunction(e) && (e = e.call(this.$element)), this.built && !this.disabled && t.isPlainObject(e) && (i(e.left) && (s.left = e.left), i(e.top) && (s.top = e.top), i(e.width) ? (s.width = e.width, s.height = e.width / o) : i(e.height) && (s.height = e.height, s.width = e.height * o), this.renderCanvas(!0)) }, getCropBoxData: function () { var t, i = this.cropBox; return this.built && this.cropped && (t = { left: i.left, top: i.top, width: i.width, height: i.height }), t || {} }, setCropBoxData: function (e) { var s, o, h = this.cropBox, a = this.options.aspectRatio; t.isFunction(e) && (e = e.call(this.$element)), this.built && this.cropped && !this.disabled && t.isPlainObject(e) && (i(e.left) && (h.left = e.left), i(e.top) && (h.top = e.top), i(e.width) && e.width !== h.width && (s = !0, h.width = e.width), i(e.height) && e.height !== h.height && (o = !0, h.height = e.height), a && (s ? h.height = h.width / a : o && (h.width = h.height * a)), this.renderCropBox()) }, getCroppedCanvas: function (i) { var e, s, o, h, a, n, r, p, c, l, g; return this.built && this.cropped && et ? (t.isPlainObject(i) || (i = {}), g = this.getData(), e = g.width, s = g.height, p = e / s, t.isPlainObject(i) && (a = i.width, n = i.height, a ? (n = a / p, r = a / e) : n && (a = n * p, r = n / s)), o = a || e, h = n || s, c = t("<canvas>")[0], c.width = o, c.height = h, l = c.getContext("2d"), i.fillColor && (l.fillStyle = i.fillColor, l.fillRect(0, 0, o, h)), l.drawImage.apply(l, function () { var t, i, o, h, a, n, p = d(this.$clone[0], this.image), c = p.width, l = p.height, u = [p], f = g.x, m = g.y; return -e >= f || f > c ? f = t = o = a = 0 : 0 >= f ? (o = -f, f = 0, t = a = ot(c, e + f)) : c >= f && (o = 0, t = a = ot(e, c - f)), 0 >= t || -s >= m || m > l ? m = i = h = n = 0 : 0 >= m ? (h = -m, m = 0, i = n = ot(l, s + m)) : l >= m && (h = 0, i = n = ot(s, l - m)), u.push(f, m, t, i), r && (o *= r, h *= r, a *= r, n *= r), a > 0 && n > 0 && u.push(o, h, a, n), u }.call(this)), c) : void 0 }, setAspectRatio: function (t) { var i = this.options; this.disabled || e(t) || (i.aspectRatio = pt(t) || NaN, this.built && (this.initCropBox(), this.cropped && this.renderCropBox())) }, setDragMode: function (t) { var i, e, s = this.options; this.ready && !this.disabled && (i = s.dragCrop && t === J, e = s.movable && t === V, t = i || e ? t : it, this.$dragBox.data(j, t).toggleClass(y, i).toggleClass(C, e), s.cropBoxMovable || this.$face.data(j, t).toggleClass(y, i).toggleClass(C, e)) } }), t.extend(l.prototype, ct), l.DEFAULTS = { aspectRatio: NaN, data: null, preview: "", strict: !0, responsive: !0, checkImageOrigin: !0, modal: !0, guides: !0, center: !0, highlight: !0, background: !0, autoCrop: !0, autoCropArea: .8, dragCrop: !0, movable: !0, rotatable: !0, scalable: !0, zoomable: !0, mouseWheelZoom: !0, wheelZoomRatio: .1, touchDragZoom: !0, cropBoxMovable: !0, cropBoxResizable: !0, doubleClickToggle: !0, minCanvasWidth: 0, minCanvasHeight: 0, minCropBoxWidth: 0, minCropBoxHeight: 0, minContainerWidth: 200, minContainerHeight: 100, build: null, built: null, cropstart: null, cropmove: null, cropend: null, crop: null, zoom: null }, l.setDefaults = function (i) { t.extend(l.DEFAULTS, i) }, l.TEMPLATE = '<div class="cropper-container"><div class="cropper-canvas"></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>', l.other = t.fn.cropper, t.fn.cropper = function (i) { var o, h = s(arguments, 1); return this.each(function () { var e, s = t(this), a = s.data(m); if (!a) { if (/destroy/.test(i)) return; s.data(m, a = new l(this, i)) } "string" == typeof i && t.isFunction(e = a[i]) && (o = e.apply(a, h)) }), e(o) ? this : o }, t.fn.cropper.Constructor = l, t.fn.cropper.setDefaults = l.setDefaults, t.fn.cropper.noConflict = function () { return t.fn.cropper = l.other, this } });
</script>
 
<link rel="stylesheet" type="text/css" href="/cropcss">
<t Control="header" style="height:30px;">Change your Profile image</t>
<div style="width:385px; height:200px; margin:0 auto;">
    <table id="imagetable">
        <tr>
            <td style="width:200px; height:200px; background-color:#222;"><img style="width:200px; height:200px;  " id="image" class="img-responsive"></td>
            <td style="width:200px; height:200px;  ">
                <div title="Preview" class="logo" style="width:200px; height:200px;min-width:200px; min-height:200px;   " id="imageprev" class="img-responsive"></div>
            </td>
            <td style="width:64px; height:64px;  ">
                <div title="Preview" class="logo" style="width:64px; height:64px;min-width:64px; min-height:64px;   " id="imageprev64" class="img-responsive"></div>
                <div title="Preview" class="logo" style=" width:32px; height:32px;min-width:32px; min-height:32px; " id="imageprev32" class="img-responsive"></div>
            </td>
        </tr>
    </table>
</div>
<input id="btnreload" type="button" value="Reset" style="display:block; width:145px; margin-bottom:5px;" />
<input id="cancelbtn" type="button" value="Cancel" style="width:60px;" />
<input id="selectimage" type="button" value="Browse..." style="width:80px;" />
<input id="uploadbtn" type="button" value="Apply" style="display:none;width:80px;" />
<script>
    var sidebar = new SideBar("Applying");
    var imagedata = null;
    var previewrefreshrate = 8;
    var finimage = null;
    $('#btnreload').on('click', () => { location.reload(); });
    $('#cancelbtn').on('click', () => { location.href = '/profile'; });
    $('#selectimage').on('click', () => {
        var d = new OpenFileDialog();
        d.SetFilter(".jpg, .png");
        d.Show(() => {
            d.GetDataBase64((data) => {
                $('#image').attr("src", data);
                $('#selectimage').css('display', 'none');
                $('#uploadbtn').css('display', 'inline');
                var cn = previewrefreshrate;
                $('#image').cropper({
                    aspectRatio: 1 / 1,
                    crop: (e) => {
                        if (cn == previewrefreshrate) {
                            $('#image').cropper('getCroppedCanvas').toBlob((blob) => {
                                finimage = blob;
                                var reader = new window.FileReader();
                                reader.readAsDataURL(blob);
                                reader.onloadend = () => {
                                    base64data = reader.result;
                                    $('#imageprev').css('background-image', "url(" + base64data + ")");
                                    $('#imageprev64').css('background-image', "url(" + base64data + ")");
                                    $('#imageprev32').css('background-image', "url(" + base64data + ")");
                                }
                            });
                            cn = 0;
                        }
                        else {
                            cn += 1;
                        }
                    }
                });
            });
        });
    });
    $('#uploadbtn').on('click', () => {
        sidebar.ClearItems();
        sidebar.AddItem(new SideBarItem("Please wait...", SpinnerInit));
        sidebar.SetAutoHide(false);
        sidebar.Show();

        (finimage == null) ? $('#image').cropper('getCroppedCanvas').toBlob((blob) => { finimage = blob }) : finimage = finimage;
        var fdata = new FormData()
        fdata.append('image', finimage);

        AjaxHelper.PostFormData('api/changeuserimage', fdata, (d) => {
            if (d == "1") {location.href = '/profile' }else{
                sidebar.ClearItems();
                sidebar.AddItem(new SideBarItem("Error", d));
                sidebar.SetAutoHide(true);
                sidebar.Show();}
        }, () => {
            sidebar.ClearItems();
            sidebar.AddItem(new SideBarItem("Transaction failed", "Connection problem"));
            sidebar.SetAutoHide(true);
            sidebar.Show();
        });

    });
</script>